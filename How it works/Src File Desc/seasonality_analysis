"""
=========================================================
src/seasonality_analysis.py
=========================================================

PROJECT STAGE:
Production Seasonality & Temporal Intelligence Module

---------------------------------------------------------
üéØ PURPOSE OF THIS FILE
---------------------------------------------------------
This module extracts seasonal patterns, long-term trends,
and temporal strength metrics from retail demand data.

While the forecasting model (LSTM) learns patterns implicitly,
this module provides explicit and interpretable time insights.

It answers:

‚Ä¢ Which months have peak demand?
‚Ä¢ How strong is seasonality?
‚Ä¢ Is demand trending upward or downward?
‚Ä¢ Are certain categories highly seasonal?

---------------------------------------------------------
üß† WHAT PROBLEM THIS FILE SOLVES
---------------------------------------------------------
Retail demand is composed of:

1Ô∏è‚É£ Trend (long-term movement)
2Ô∏è‚É£ Seasonality (repeating cycles)
3Ô∏è‚É£ Residual (random noise)

Without decomposition:

‚Ä¢ Trend and seasonal spikes get mixed
‚Ä¢ Promotion impact becomes unclear
‚Ä¢ Long-term planning becomes difficult

This module separates those components.

---------------------------------------------------------
‚öôÔ∏è WHAT HAPPENS INSIDE THIS FILE
---------------------------------------------------------

Typical functions include:

1Ô∏è‚É£ monthly_seasonal_pattern(df)

Aggregates demand by month.
Used for seasonal charts in dashboard.

2Ô∏è‚É£ category_decomposition(df, category)

Performs time-series decomposition to extract:
‚Ä¢ Trend
‚Ä¢ Seasonal
‚Ä¢ Residual components

3Ô∏è‚É£ seasonality_strength(decomposition_result)

Calculates:

Seasonality Strength =
Variance(seasonal component) /
Variance(total series)

Higher value ‚Üí stronger seasonal influence.

4Ô∏è‚É£ long_cycle_trend(df)

Detects long-term upward or downward demand trend.

---------------------------------------------------------
üìä BUSINESS VALUE CREATED
---------------------------------------------------------
This module enables:

‚Ä¢ Pre-season inventory planning
‚Ä¢ Strategic marketing timing
‚Ä¢ Category-level seasonal planning
‚Ä¢ Long-term expansion decisions

---------------------------------------------------------
üîó HOW IT CONNECTS TO THE PROJECT
---------------------------------------------------------
Feeds into:

‚Üí recommendation_engine.py
‚Üí Executive KPI metrics
‚Üí Streamlit seasonal charts
‚Üí What-if simulation context

Supports promotion and pricing decisions.

---------------------------------------------------------
üèó ARCHITECTURAL POSITION
---------------------------------------------------------
Layer 1: Data
Layer 2: Forecasting
Layer 3: Risk & Inventory
Layer 4: Regional Intelligence
Layer 5: Seasonality Intelligence   ‚Üê This file
Layer 6: Strategic AI Engine
Layer 7: Dashboard

---------------------------------------------------------

"I implemented a seasonality intelligence module that 
decomposes time-series demand into trend and seasonal 
components, enabling strategic planning beyond short-term 
forecasting."

---------------------------------------------------------
üß† KEY LEARNING
---------------------------------------------------------
Forecasting predicts future numbers.

Seasonality analysis explains the structure behind them.

Interpretability strengthens strategic trust.
=========================================================
"""
