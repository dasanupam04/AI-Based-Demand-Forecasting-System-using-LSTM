"""
=========================================================
src/preprocessing.py
=========================================================

PROJECT STAGE:
Production Preprocessing & Sequence Engineering Module

---------------------------------------------------------
üéØ PURPOSE OF THIS FILE
---------------------------------------------------------
This module converts raw demand data into a model-ready 
format for forecasting in the production system.

Unlike notebook preprocessing (experimental),
this file provides reusable functions that can be called 
by:

‚Ä¢ app.py
‚Ä¢ multi_product_pipeline.py
‚Ä¢ model_comparison.py
‚Ä¢ LSTM training module

It ensures consistency between training and inference.

---------------------------------------------------------
üß† WHAT PROBLEM THIS FILE SOLVES
---------------------------------------------------------
Neural networks require:

‚Ä¢ Normalized data
‚Ä¢ Structured sequences
‚Ä¢ Proper time-based splitting

Without centralized preprocessing:

‚Ä¢ Inconsistent scaling may occur
‚Ä¢ Data leakage risks increase
‚Ä¢ Inference may not match training format

This module guarantees stable data transformation.

---------------------------------------------------------
‚öôÔ∏è WHAT HAPPENS INSIDE THIS FILE
---------------------------------------------------------

Typical functions include:

1Ô∏è‚É£ scale_series(series)

Uses MinMaxScaler to normalize demand values.
Neural networks train more effectively on scaled inputs.

Returns:
‚Ä¢ Scaled data
‚Ä¢ Fitted scaler (used later for inverse transform)

2Ô∏è‚É£ create_sequences(data, window_size)

Implements sliding window logic.

Example:
Input: Day 1‚Äì30
Target: Day 31

Converts time-series into supervised learning format.

3Ô∏è‚É£ time_series_split(X, y)

Splits dataset chronologically:
‚Ä¢ First portion ‚Üí Training
‚Ä¢ Last portion ‚Üí Testing

Prevents data leakage.

---------------------------------------------------------
üìä WHY THIS FILE IS IMPORTANT
---------------------------------------------------------
This file ensures:

‚Ä¢ Model training and inference use identical logic
‚Ä¢ Scaling remains consistent
‚Ä¢ Production forecasts remain stable
‚Ä¢ Multi-product pipeline remains scalable

It is the bridge between raw data and modeling.

---------------------------------------------------------
üîó HOW IT CONNECTS TO THE PROJECT
---------------------------------------------------------
Used by:

‚Üí lstm_model.py
‚Üí model_comparison.py
‚Üí multi_product_pipeline.py
‚Üí app.py forecasting logic

Without this file, production forecasting fails.

---------------------------------------------------------
üèó ARCHITECTURAL POSITION
---------------------------------------------------------
Layer 1: Raw Data
Layer 2: Data Utilities
Layer 3: Production Preprocessing   ‚Üê This file
Layer 4: Modeling
Layer 5: Intelligence & Decision Layer
Layer 6: Dashboard

---------------------------------------------------------

"I created a production-grade preprocessing module to 
standardize scaling, sequence generation, and time-series 
splitting across the entire forecasting system."

---------------------------------------------------------
üß† KEY LEARNING
---------------------------------------------------------
Consistency between training and inference 
is critical in deployed ML systems.

Centralized preprocessing prevents subtle 
model instability issues.
=========================================================
"""
